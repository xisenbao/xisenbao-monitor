塞壬
pnpm- monorepo
ts
mocha


埋点和监控两部分

监控：
b端: pc,h5
c端 pc,h5,小程序(小鹅通小程序，店铺小程序)，app

用户行为： 浏览，点击，滑动
================================

用户数据
用户ip地址、用户id、页面id/url

设备数据：
终端类型 （b端: pc,h5   c端 pc,h5,小程序(小鹅通小程序，店铺小程序)，app）

行为数据：（ 浏览，点击，滑动）

异常数据
错误类型(js报错、dom节点异常、跳转异常、接口请求超时、接口返回异常)、异常堆栈

数据去重
数据清洗入仓


pv，页面白屏时间、首屏时间、停留时间、加载时间

容错、不阻塞业务


监控SDK、埋点SDK、录屏SDK、广告SDK

相比sentry，自研监控平台的优势在于：
1、可以将公司的SDK统一成一个，包括但不限于：监控SDK、埋点SDK、录屏SDK、广告SDK等
2、提供了更多的错误还原方式，同时错误信息可以和埋点信息联动，便可拿到更细致的用户行为栈，更快的排查线上错误
3、监控自定义的个性化指标：如 long task、memory页面内存、首屏加载时间等。过多的长任务会造成页面丢帧、卡顿；过大的内存可能会造成低端机器的卡死、崩溃
4、统计资源缓存率，来判断项目的缓存策略是否合理，提升缓存率可以减少服务器压力，也可以提升页面的打开速度
5、提供了 采样对比+ 轮询修正机制 的白屏检测方案，用于检测页面是否一直处于白屏状态，让开发者知道页面什么时候白了，具体实现见 前端白屏的检测方案，解决你的线上之忧

作者：海阔_天空
链接：https://juejin.cn/post/7172072612430872584
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。


一个完整的前端监控平台包括三个部分：数据采集与上报、数据分析和存储、数据展示


https://m-cheng-web.github.io/web-tracing-docu/about/core.html#who

数据结构
{
    userId: '',
    deviceId: '',
    sceneId: '',

    //用户数据
    userInfo: {
        //用户属性
        userAttr: {

        }

        //用户行为
        userBehaviour: {

        }

    },
    //异常数据
    anomalyInfo: {

    },
    //设备数据
    deviceInfo: {

    },
    //监控指标
    monitorInfo: {

    }
}
